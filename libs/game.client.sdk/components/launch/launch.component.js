!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.gmStart=e():t.gmStart=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=34)}([function(t,e,n){"use strict";function r(t){return"_"+t}Object.defineProperty(e,"__esModule",{value:!0}),e.setStyle=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},e.setProps=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},e.degreeToAngle=function(t){return t*Math.PI/180},e.angleTodegree=function(t){return 180*t/Math.PI},e.watch=function(t){return function(e,n,o){if(o){var i=o.value;o.value=function(){for(var e=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=i.apply(this,r);return a instanceof Promise?a.then(function(){e[t](n)}):this[t](n),a}}else{var a=r(n);Object.defineProperty(e,n,{get:function(){return this[a]},set:function(e){this[a]=e,this[t](n)},configurable:!0})}return o}},e.throttleSyncCallToOne=function(){return function(t,e,n){var o=r(e+"_throttle_timeout"),i=n.value;return n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];clearTimeout(this[o]),this[o]=setTimeout(function(){i.apply(t,e)},0)},n}},e.createRandomString=function(){return Math.random().toString().replace("0.","")},e.uniqueKey=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),a=n(28),c=n(0),s=function(t){function e(){var e=t.call(this)||this;return e.x=0,e.y=0,e.alpha=1,e.scaleX=1,e.scaleY=1,e.pivotX=0,e.pivotY=0,e.rotation=0,e.visible=!0,e.children=[],e.is_top=!1,e.type="Node",e.on("added",function(){e.rePos(),e.calcTransform()}),e}return r(e,t),e.prototype.addChild=function(t){var e=this.children;-1===e.indexOf(t)&&(e.push(t),t.parent=this,t.event("added"))},e.prototype.addChildAt=function(t,e){var n=this.children,r=n.indexOf(t);n.splice(e,r,t),t.parent=this,t.event("added")},e.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var o=r[n];this.addChild(o)}},e.prototype.removeChild=function(t){var e=this.children,n=e.indexOf(t);-1!==n&&(e.splice(n,1),t.event("removed"))},e.prototype.removeChildren=function(){for(var t=this.children.length-1;t>=0;t--)this.children[t].destroy();this.children=[]},e.prototype.getChildAt=function(t){var e=this.children;if(!(t>=e.length))return e[t]},e.prototype.getChildByName=function(t){for(var e=0,n=this.children;e<n.length;e++){var r=n[e];if(r.name===t)return r}},Object.defineProperty(e.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){var e=this.parent,n=this.children;e&&(e.removeChild(this),this.parent=null);for(var r=n.length-1;r>=0;r--)n[r].destroy();this.children=[],t.prototype.destroy.call(this)},e.prototype.calcTransform=function(){var t=this,e=t.x,n=t.y,r=t.rotation,o=t.scaleX,i=t.scaleY,s=t.pivotX,u=t.pivotY,l=c.degreeToAngle(r),f=a.m3.translate(a.m3.identity(),e,n);return f=a.m3.rotate(f,l),f=a.m3.scale(f,o,i),f=a.m3.translate(f,-s,-u),this.matrix=a.m3.toM2(f),f},e.prototype.globalToLocal=function(t){var e=this.pivotX,n=this.pivotY;if(this.is_top)return t;var r=this.parent.globalToLocal(t),o=this.matrix,i=o[0],a=o[1],c=o[2],s=o[3],u=o[4],l=o[5],f=i*s-a*c,h=-a/f,p=-c/f,d=i/f,v=(c*l-s*u)/f,y=-(i*l-a*u)/f;return{x:s/f*r.x+p*r.y+v+e,y:h*r.x+d*r.y+y+n}},e.prototype.localToGlobal=function(t){var e=this,n=e.x,r=e.y,o=e.pivotX,i=e.pivotY;if(e.is_top)return t;var a={x:n+t.x-o,y:r+t.y-i};return this.parent.localToGlobal(a)},e.prototype.event=function(e,n){t.prototype.event.call(this,e,n),n instanceof i.Event&&!n.stop_pop&&this.parent&&this.parent.event(e,n)},e.prototype.getBounds=function(){return{x:this.x,y:this.y,height:this.height,width:this.width}},e.prototype.rePos=function(){var t=this.centerX,e=this.centerY,n=this.pivotX,r=this.pivotY;if(this.parent){var o=this.parent.getBounds(),i=o.width,a=o.height,c=this.getBounds(),s=c.width,u=c.height;isNaN(Number(t))||(this.x=(i-s)/2+t-n),isNaN(Number(e))||(this.y=(a-u)/2+e-r)}},o([c.watch("calcTransform")],e.prototype,"x",void 0),o([c.watch("calcTransform")],e.prototype,"y",void 0),o([c.watch("rePos")],e.prototype,"centerX",void 0),o([c.watch("rePos")],e.prototype,"centerY",void 0),o([c.watch("calcTransform")],e.prototype,"scaleX",void 0),o([c.watch("calcTransform")],e.prototype,"scaleY",void 0),o([c.watch("calcTransform")],e.prototype,"pivotX",void 0),o([c.watch("calcTransform")],e.prototype,"pivotY",void 0),o([c.watch("calcTransform")],e.prototype,"rotation",void 0),e}(n(27).EventDispatcher);e.Node=s},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),a={};function c(t){return r(this,void 0,Promise,function(){var e,n,r,c;return o(this,function(o){switch(o.label){case 0:return e=t.url,n=t.type,-1!==(r=i.state.base_path+e).indexOf("image/png")&&(r=e),(c=a[e])?[2,c]:"Image"!==n?[3,2]:[4,function(t){return new Promise(function(e,n){var r=a[t];if(r)return e(r);var o=new Image;o.onload=function(){a[t]=o,e(o)},o.onerror=function(t){n(t)},o.src=t})}(r)];case 1:c=o.sent(),o.label=2;case 2:return"Script"!==n?[3,4]:[4,function(t){return new Promise(function(e,n){var r=a[t];if(r)return e(r);var o=document.createElement("script");o.type="text/javascript",o.onload=function(){a[t]=o,e(o)},o.onerror=function(t){n(t)},o.src=t,document.body.appendChild(o)})}(r)];case 3:c=o.sent(),o.label=4;case 4:return"Stylesheet"!==n?[3,6]:[4,s(r)];case 5:c=o.sent(),o.label=6;case 6:return"String"!==n?[3,8]:[4,s(r)];case 7:c=o.sent(),o.label=8;case 8:return a[e]=c,[2,c]}})})}function s(t){return new Promise(function(e,n){var r=a[t];if(r)return e(r);var o=document.createElement("link");o.onload=function(){a[t]=o,e(o)},o.onerror=function(t){n(t)},o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",t),document.body.appendChild(o)})}e.load=function(t,e){return void 0===e&&(e="parallel"),r(this,void 0,Promise,function(){var n,r,i,a,s,u;return o(this,function(o){switch(o.label){case 0:if(t.url)return[2,c(t)];if("queue"!==e)return[3,5];n=0,r=t,o.label=1;case 1:return n<r.length?[4,c(r[n])]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2];case 5:i=[],a=0,s=t,o.label=6;case 6:return a<s.length?[4,c(s[a])]:[3,9];case 7:u=o.sent(),i.push(u),o.label=8;case 8:return a++,[3,6];case 9:return[2,Promise.all(i)]}})})},e.clearRes=function(){a={}},e.getRes=function(t){return a[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),o=n(23),i={save:a,restore:c,clear:s,setAlpha:u,transform:l,drawTexture:n(22).drawTexture,drawGraphics:r.drawGraphics,drawText:o.drawText};function a(){e.ctx.save()}function c(){e.ctx.restore()}function s(t,n,r,o){e.ctx.clearRect(0,0,r,o)}function u(t){e.ctx.globalAlpha*=t}function l(t){e.ctx.transform.apply(e.ctx,t)}e.initEngine=function(t){return t&&(e.ctx=t.getContext("2d")),i},e.save=a,e.restore=c,e.clear=s,e.setAlpha=u,e.transform=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(0),c=function(t){function e(){var e=t.call(this)||this;return e.is_top=!0,e.canvas_is_rotate=!1,i=e,e.on("resize",e.onResize.bind(e)),e}return r(e,t),e.prototype.onResize=function(t){var e=t.canvas_width,n=t.canvas_height,r=this.width,i=this.height;this.x=Math.round((e-r)/2),this.y=Math.round((n-i)/2),a.setProps(this,o({},t))},Object.defineProperty(e,"instance",{get:function(){return i||(i=new this),i},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),i=void 0},e}(n(1).Node);e.Stage=c},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n(4),a=n(9),c=n(21),s=n(2),u=n(20),l=n(0);e.state={base_path:"",bg_color:"black",screen_mode:"horizontal"},e.init=function(t,n,c){var s=c.canvas;s||(s=document.createElement("canvas"),document.body.appendChild(s));var f=new i.Stage;return l.setProps(e.state,r({},c,{canvas:s,stage:f})),a.render(s,f,u.interval),o.watchCanvas(s,f,t,n),e.state},e.destroy=function(){var t=e.state.canvas,n=e.state.stage;s.clearRes(),c.clearImg(),a.stopRender(),o.stopWatchCanvas(),n.destroy(),t.parentNode.removeChild(t),e.state=void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.alpha=1,this.graphics_list=[]}return t.prototype.drawLine=function(t,e,n,r,o,i){void 0===i&&(i=1),this.graphics_list.push({type:"line",params:[t,e,n,r,o,i]})},t.prototype.drawPath=function(t,e,n,r,o){void 0===o&&(o=1),this.graphics_list.push({type:"path",params:[t,e,n,,r,o]})},t.prototype.drawCurves=function(t){},t.prototype.drawRect=function(t,e,n,r,o,i,a){void 0===a&&(a=1),this.graphics_list.push({type:"rect",params:[t,e,n,r,o,i,a]})},t.prototype.drawPoly=function(t,e,n,r,o,i){void 0===i&&(i=1),this.graphics_list.push({type:"poly",params:[t,e,n,r,o,i]})},t.prototype.drawCircle=function(t,e,n,r,o,i){void 0===i&&(i=1),this.graphics_list.push({type:"arc",params:[t,e,n,0,2*Math.PI,!0,r,o,i]})},t.prototype.drawPie=function(t,e,n,r,o,i,a,c,s){void 0===s&&(s=1),this.graphics_list.push({type:"arc",params:[t,e,n,r,o,i,a,c,s]})},t.prototype.setAlpha=function(t){this.alpha=t},t.prototype.render=function(t){t.drawGraphics(this)},t.prototype.clear=function(){this.graphics_list=[]},t}();e.Graphics=r},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),i=n(6),a=n(17),c=n(1),s=n(15),u=n(14),l=n(0);function f(t){return u.convertXMLToNode(t,{Dialog:o.Dialog,Image:a.Image,Button:a.Image,Node:c.Node,Label:s.Text,Box:c.Node,View:c.Node})}e.xml={},e.setXml=function(t){l.setProps(e.xml,r({},t))},e.xmlToNode=f,e.startScene=function(t){var n=f(e.xml.scene);t.addChild(n);var r=n.circle_box,o=n.refresh,a=n.progress_text,c=n.tip_text,s=new i.Graphics;o.graphics=s,s.drawRect(0,0,o.width,o.height,null,"#d4e1ec",2),o.visible=!1,setTimeout(function(){c.text="正在加载游戏引擎..."},3e3),setTimeout(function(){c.text="您当前网速较慢, 请您耐心等待..."},12e3),setTimeout(function(){c.x-=40,o.visible=!0},3e4),o.on("click",function(){location.reload(!0)});for(var u=r.children,l=0,h=u;l<h.length;l++){var p=h[l],d=new i.Graphics;p.graphics=d,d.drawCircle(0,0,10,"#cdf7ff")}var v=0,y=setInterval(function(){if(r.destroyed)return clearInterval(y);++v>=u.length&&(v=0);for(var t=0;t<u.length;t++)u[t].alpha=t===v?1:.5},500);return{stage:t,scene:n,setProgress:function(t){a.text=t}}}},function(t,e,n){"use strict";function r(t,e){var n=[],r=t.width,o=t.height,i=e[0],a=e[1],c=e[2],s=e[3],u={x:0,y:0,w:s,h:i},l={x:s,y:0,w:r-s-a,h:i},f={x:r-a,y:0,w:a,h:i},h={x:0,y:i,w:s,h:o-i-c},p={x:s,y:i,w:r-s-a,h:o-i-c},d={x:r-a,y:i,w:s,h:o-i-c},v={x:0,y:o-c,w:s,h:c},y={x:s,y:o-c,w:r-s-a,h:c},g={x:r-a,y:o-c,w:a,h:c};return n.push(u,l,f,h,p,d,v,y,g),n}function o(t,e,n,r,o){var i=document.createElement("canvas").getContext("2d");return i.canvas.width=r,i.canvas.height=o,i.drawImage(t,e,n,r,o,0,0,r,o),i.canvas}Object.defineProperty(e,"__esModule",{value:!0}),e.gridPattern=["normal","repeat-x","normal","repeat-y","repeat","repeat-y","normal","repeat-x","normal"],e.gridImage=function(t,e){for(var n=[],i=0,a=r({width:t.width,height:t.height},e);i<a.length;i++){var c=a[i],s=o(t,c.x,c.y,c.w,c.h);n.push(s)}return n},e.gridSize=r,e.clipImage=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,i,a=n(3);e.render=function(t,e,n){r||(r=a.initEngine(t)),i=function(){!function t(e){if(r.save(),e.is_top){var n=e,o=n.canvas_width,i=n.canvas_height;r.clear(0,0,o,i)}if(!e.visible)return r.restore();var a=e.matrix,c=e.alpha,s=e.graphics;if(1!==c&&r.setAlpha(c),r.transform(a),s&&r.drawGraphics(s),"Image"===e.type)for(var u=e.textures,l=0,f=u;l<f.length;l++){var h=f[l];r.drawTexture(h)}else"Text"===e.type&&r.drawText(e);for(var p=0,d=e.children;p<d.length;p++){var v=d[p];t(v)}r.restore()}(e),n(),o=requestAnimationFrame(i)},o=requestAnimationFrame(i)},e.stopRender=function(){cancelAnimationFrame(o)},e.startRender=function(){i()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(11),i=n(12);function a(t,e){var n=t.getBounds(),r=n.width,o=n.height,i=t.globalToLocal(e),a=i.x,c=i.y;return a>=0&&c>=0&&a<r&&c<o}e.triggerPosEvent=function(t,e){var n=i.convertPosClientToStage(e);!function t(e,n){for(var r=n.children,o=r.length,i=o-1;i>=0;i--){var c=e.stageX,s=e.stageY,u=r[i],l=t(e,u);if(l)return!0;if(a(u,{x:c,y:s}))return u.event(e.type,e),!0}return!1}(new o.Event(t,n),r.Stage.instance)},e.triggerResizeEvent=function(t,e){r.Stage.instance.event(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.stop_pop=!1,this.type=t,this.stageX=e.x,this.stageY=e.y}return t.prototype.stopPropagation=function(){this.stop_pop=!0},t}();e.Event=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(26),i=n(25);e.watchCanvas=function(t,e,n,r){o.watchClick(t),i.watchResize(t,e,n,r)},e.stopWatchCanvas=function(){o.stopWatchClick(),i.stopWatchResize()},e.convertPosClientToStage=function(t){var e,n,o,i,a=r.Stage.instance,c=a.canvas_scale,s=a.canvas_is_rotate,u=a.width,l=a.height,f=a.canvas_height,h=a.x,p=a.y,d=!1;return s?(e=t.y/c,n=f-t.x/c):(e=t.x/c,n=t.y/c),o=Math.ceil(e-h),i=Math.ceil(n-p),(o<0||i<0||o>u||i>l)&&(d=!0),{x:o,y:i,out_stage:d}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7);e.setLogo=function(t,e,n){var o='\n<View width="'+e+'" height="'+n+'" sceneColor="#000" editorInfo="compId=1">\n<Image skin="'+t+'" centerX="0" centerY="-100" var="logo"/>\n<Box width="123" var="circle_box" centerX="0" centerY="90" height="24" editorInfo="compId=8">\n  <Box name="item0" x="0" y="0" editorInfo="compId=4"/>\n  <Box x="51" name="item1" y="0" editorInfo="compId=6"/>\n  <Box x="101" name="item2" y="0" editorInfo="compId=7"/>\n</Box>\n<Box width="653" height="165" centerX="0" centerY="285" editorInfo="compId=18">\n    <Label text="健康游戏公告" width="151" height="35" fontSize="22" bold="true" align="center" color="#0f111e" valign="middle" y="31" x="251" editorInfo="compId=19"/>\n    <Label text="拒绝盗版游戏 抵制不良游戏 严打网络赌博 禁止非法宣传 注意自我保护" width="653" height="35" fontSize="20" bold="true" align="center" color="#0f111e" valign="middle" y="63" x="0" editorInfo="compId=21"/>\n    <Label text="谨防上当受骗 适度游戏益脑 沉迷游戏伤身 合理安排时间 享受健康生活" width="653" height="35" fontSize="20" bold="true" align="center" color="#0f111e" valign="middle" x="0" y="91" editorInfo="compId=22"/>\n</Box>\n<Box width="500" height="64" centerX="0" centerY="164" editorInfo="compId=23">\n    <Label var="tip_text" text="" width="500" height="23" fontSize="20" bold="true" align="center" color="#d4e1ec" x="0" y="0" editorInfo="compId=13"/>\n    <Label var="progress_text" text="" width="500" height="23" fontSize="20" bold="true" align="center" color="#d4e1ec" x="0" y="37" editorInfo="compId=9"/>\n    <Label text="重新加载" width="95" height="35" fontSize="20" bold="true" align="center" color="#d4e1ec" valign="middle" var="refresh" visible="false" y="-8" x="370" />\n</Box>\n</View>';r.setXml({scene:o})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertXMLToNode=function(t,e){return function t(e,n,i){var a=e.props,c=e.type,s=e.children;if(n[c]){var u=new n[c];for(var l in i||(i=u),a)if(a.hasOwnProperty(l)&&("var"===l&&(i[a[l]]=u),-1===r.indexOf(l))){var f=o(a[l]);u[l]=f}for(var h=0,p=s;h<p.length;h++){var d=p[h],v=t(d,n,i);v&&u.addChild(v)}return u}}(function(t){var e=function(t){if(void 0===t)return null;var e,n;window.DOMParser&&(n=new window.DOMParser);try{e=n.parseFromString(t,"text/xml").firstChild}catch(t){e=null}return e}(t);return null!==e?function t(e){var n={};n.type=function(t){var e=t.localName;return null===e&&(e=t.baseName),null!==e&&""!==e||(e=t.nodeName),e}(e),n.children=[];for(var r=e.childNodes,o=e.attributes,i=0,a=r;i<a.length;i++){var c=a[i],s=t(c);n.children.push(s)}if(o){n.props={};for(var u=o.length,l=0;l<u;l++){var f=o.item(l);n.props[f.name]=f.value}}return n}(e):null}(t),e)};var r=["editorInfo","sceneColor","var"];function o(t){return"true"===t||"false"!==t&&(isNaN(Number(t))?t:Number(t))}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.text="",e.font="Arail, Simsun",e.fontSize=20,e.bold=!1,e.italic=!1,e.color="black",e.stroke=0,e.strokeColor="black",e.align="left",e.valign="top",e.type="Text",e}return r(e,t),e}(n(1).Node);e.Text=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(){function t(t,e){this.x=0,this.y=0,this.width=0,this.height=0,this.pattern="normal",this.image=t,this.updateProps(e)}return t.prototype.updateProps=function(t){r.setProps(this,t)},t.prototype.destroy=function(){this.image=void 0},t}();e.Texture=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(8),s=n(2),u=n(0),l=n(1),f=n(16),h=function(t){function e(){var e=t.call(this)||this;return e.textures=[],e.type="Image",e.on("added",function(){e.calcTexture()}),e}return r(e,t),e.prototype.calcTexture=function(){return i(this,void 0,void 0,function(){var t,e,n,r,o,i,u,l,h,p,d,v,y,g,_,m,w,b,x,P,O,T,j,S,k;return a(this,function(a){switch(a.label){case 0:if(e=(t=this).sizeGrid,n=t.skin,r=t.textures,i=(o=this).width,u=o.height,l=[],r){for(h=0,p=r;h<p.length;h++)(k=p[h]).destroy();this.textures=[]}return n?[4,s.load({type:"Image",url:n})]:[2];case 1:if(d=a.sent(),e)for(g=e.split(",").map(function(t){return Number(t)}),_=c.gridImage(d,g),m=c.gridSize({width:i,height:u},g),w=0;w<_.length;w++)b=m[w],x=b.x,P=b.y,O=b.w,T=b.h,j=c.gridPattern[w],S=_[w],k=new f.Texture(S,{x:x,y:P,width:O,height:T,pattern:j}),l.push(k);else v=d.width,y=d.height,void 0===i&&(i=v),void 0===u&&(u=y),k=new f.Texture(d,{width:i,height:u}),l.push(k);return this.textures=l,this.updateTexture(),this.rePos(),[2]}})})},e.prototype.updateTexture=function(){var t=this.sizeGrid,e=this.textures,n=this.width,r=this.height;if(!(e.length<=1)){for(var o=t.split(",").map(function(t){return Number(t)}),i=c.gridSize({width:n,height:r},o),a=0;a<e.length;a++){var s=i[a],u=s.x,l=s.y,f=s.w,h=s.h;e[a].updateProps({x:u,y:l,width:f,height:h})}this.rePos()}},e.prototype.getBounds=function(){var t=this.x,e=this.y,n=this.textures,r=this.height,o=this.width;return n.length&&(void 0===o&&(o=n[0].width),void 0===r&&(r=n[0].height)),{x:t,y:e,height:r,width:o}},o([u.watch("calcTexture")],e.prototype,"skin",void 0),o([u.watch("updateTexture")],e.prototype,"sizeGrid",void 0),o([u.watch("updateTexture")],e.prototype,"width",void 0),o([u.watch("updateTexture")],e.prototype,"height",void 0),o([u.throttleSyncCallToOne()],e.prototype,"calcTexture",null),e}(l.Node);e.Image=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(6),i=n(1),a=n(4),c=[],s=function(){function t(){var t=a.Stage.instance;t.on("resize",function(){for(var e=0,n=c;e<n.length;e++){var r=n[e].bg,o=t.width,i=t.height,a=t.canvas_height,s=t.canvas_width,u=t.x,l=t.y;r.width=o,r.height=i,r.graphics.clear(),r.graphics.drawRect(0,0,s,a,"black"),r.x=-u,r.y=-l}})}return Object.defineProperty(t,"instance",{get:function(){return r||(r=new this),r},enumerable:!0,configurable:!0}),t.prototype.open=function(t){var e,n=this.findDialogInTemp(t),r=a.Stage.instance;if(n)e=n.wrap;else{var s=r.width,u=r.height,l=r.canvas_height,f=r.canvas_width,h=r.x,p=r.y,d=new i.Node;d.width=s,d.height=u;var v=new o.Graphics;v.drawRect(0,0,f,l,"black"),d.x=-h,d.y=-p,v.alpha=.7,d.graphics=v,(e=new i.Node).width=s,e.height=u,t.x=(s-t.width)/2,t.y=(u-t.height)/2,e.addChildren(d,t),c.push({dialog:t,bg:d,wrap:e})}r.addChild(e)},t.prototype.close=function(t){var e=a.Stage.instance,n=this.findDialogInTemp(t);if(n){var r=n.wrap;e.removeChild(r)}},t.prototype.findDialogInTemp=function(t){for(var e=0,n=c;e<n.length;e++){var r=n[e];if(t===r.dialog)return r}},t}();e.DialogManager=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(18),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.close=function(t){this.event("close",t),i.DialogManager.instance.close(this),this.isPopup=!1},e.prototype.popup=function(){this.isPopup=!0,i.DialogManager.instance.open(this)},e}(o.Node);e.Dialog=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[];function o(t,e,n,o){var a=function(){i(t,n)};return r.push({caller:n,delay:e,fun:t,off:a,once:o,then:Date.now()}),a}function i(t,e){for(var n=r.length-1;n>=0;n--){var o=r[n],i=o.fun;if(o.caller===e&&i===t)return void r.splice(n,1)}}e.loop=o,e.once=function(t,e,n){return o(t,e,n,!0)},e.clear=i,e.clearAll=function(t){for(var e=r.length-1;e>=0;e--)t!==r[e].caller||r.splice(e,1)},e.interval=function(){var t=r.length;if(t)for(var e=Date.now(),n=t-1;n>=0;n--){var o=r[n],i=o.fun,a=o.then,c=o.delay,s=o.once,u=o.off,l=e-a||0;if(!(l<c)){var f=Math.floor(l/c),h=e-(l-f*c);"function"==typeof i&&i(f),s?u():o.then=h}}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),a=n(2),c={};e.getImageData=function(t,e,n){return r(this,void 0,void 0,function(){var r,s,u,l,f;return o(this,function(o){switch(o.label){case 0:return(r=c[t])?[3,2]:[4,a.load({type:"Image",url:t})];case 1:s=o.sent(),r={texture:s},o.label=2;case 2:return e?((u=r.grid)||(u={}),l=e.join(","),(f=u[l])||(f=i.gridImage(s,e)),void 0===n?[2,f]:[2,f[n]]):[2,r.texture]}})})},e.clearImg=function(){c=void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.drawTexture=function(t){r.ctx.save();var e=t.x,n=t.y,o=t.width,i=t.height,a=t.image,c=t.pattern;if(r.ctx.translate(e,n),"normal"===c)r.ctx.drawImage(a,0,0,o,i);else{var s=r.ctx.createPattern(a,c);r.ctx.fillStyle=s,r.ctx.fillRect(0,0,o,i)}r.ctx.restore()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.drawText=function(t){var e=t.stroke,n=t.strokeColor,o=t.text,i=t.font,a=t.fontSize,c=t.color,s=t.align,u=t.valign,l=t.italic,f=t.bold,h=t.width,p=t.height;if(o){var d=0,v=0;"left"===s?d=0:"center"===s?d=h/2:"right"===s&&(d=h),"top"===u?v=0:"middle"===u?v=p/2:"bottom"===u&&(v=p),r.ctx.textBaseline=u,r.ctx.textAlign=s,r.ctx.font=(l?"italic":"")+" "+(f?"bold":"")+" "+a+"px "+i,r.ctx.fillStyle=c,e&&(r.ctx.strokeStyle=n,r.ctx.lineWidth=e,r.ctx.miterLimit=2,r.ctx.strokeText(o,d,v)),r.ctx.fillText(o,d,v)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);function o(t){var e=t[0],n=t[1],o=t[2],i=t[3],a=t[4],c=t[5];r.ctx.lineWidth=c,r.ctx.strokeStyle=a,r.ctx.moveTo(e,n),r.ctx.lineTo(o,i),r.ctx.stroke()}function i(t){var e=t[0],n=t[1],o=t[2],i=t[3],a=t[4],c=t[5],s=t[6];s&&(r.ctx.lineWidth=s),c&&(r.ctx.strokeStyle=c),r.ctx.beginPath(),r.ctx.rect(e,n,o,i),a?(r.ctx.fillStyle=a,r.ctx.fill()):r.ctx.stroke()}function a(t){var e=t[0],n=t[1],o=t[2],i=t[3],a=t[4],c=t[5],s=t[6],u=t[7],l=t[8];l&&(r.ctx.lineWidth=l),u&&(r.ctx.strokeStyle=u),r.ctx.beginPath(),r.ctx.moveTo(e,n),r.ctx.arc(e,n,o,i,a,c),r.ctx.closePath(),s?(r.ctx.fillStyle=s,r.ctx.fill()):r.ctx.stroke()}function c(t,e){t[0],t[1];var n=t[2],o=t[3],i=t[4],a=t[5];a&&(r.ctx.lineWidth=a),i&&(r.ctx.strokeStyle=i),r.ctx.beginPath();for(var c=0,s=n;c<s.length;c++){var u=s[c];r.ctx.lineTo(u.x,u.y)}e&&r.ctx.closePath(),o?(r.ctx.fillStyle=o,r.ctx.fill()):r.ctx.stroke()}e.drawGraphics=function(t){var e=t.graphics_list,n=t.alpha;r.ctx.save(),r.ctx.globalAlpha*=n;for(var s=0,u=e;s<u.length;s++){var l=u[s];r.ctx.save();var f=l.type,h=l.params;"line"===f?o(h):"path"===f?c(h,!1):"rect"===f?i(h):"poly"===f?c(h,!0):"arc"===f&&a(h),r.ctx.restore()}r.ctx.restore()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(5),i=n(9),a=n(0),c=n(10),s={};function u(){var t=o.state.screen_mode,e=document.documentElement,n=e.clientWidth,u=e.clientHeight,l=s.canvas,f=s.stage_width,h=s.stage_height;l.height=0,l.width=0,i.stopRender(),clearTimeout(r),r=setTimeout(function(){var e=!1,r=n,o=u;if("horizontal"===t){if(u>n){e=!0;var s=o;o=r,r=s}}else if(u<n){e=!0;s=o;o=r,r=s}var p,d,v=r/o;v>f/h?(p=h*v,d=h):(p=f,d=f/v),d=Math.ceil(d),p=Math.ceil(p),l.height=d,l.width=p;var y=r/p;e?a.setStyle(l,{webkitTransform:"scale("+y+") rotate(90deg) translate(0, -"+d+"px)",transform:"scale("+y+") rotate(90deg) translate(0, -"+d+"px)"}):a.setStyle(l,{webkitTransform:"scale("+y+")"}),c.triggerResizeEvent("resize",{canvas_width:p,canvas_height:d,canvas_scale:y,canvas_is_rotate:e}),i.startRender()},100)}e.watchResize=function(t,e,n,r){t=t,a.setStyle(t,{position:"absolute",left:0,top:0,webkitTransformOrigin:"0px 0px 0px",transformOrigin:"0px 0px 0px",touchAction:"manipulation",background:o.state.bg_color,zIndex:1e3}),e.width=n,e.height=r,a.setProps(s,{canvas:t,stage_width:n,stage_height:r}),window.addEventListener("resize",u,!1),u()},e.stopWatchResize=function(){window.removeEventListener("resize",u,!1),s=void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(10),i={},a={};function c(t){if(!(t.changedTouches.length>1)){t.stopPropagation(),t.preventDefault();var e=t.touches[0],n=e.clientX,r=e.clientY;a.status="start",a.start_pos={x:n,y:r}}}function s(t){if(!(t.changedTouches.length>1)){t.stopPropagation(),t.preventDefault(),"start"===a.status&&(a.status="move");var e=a.start_pos,n=e.x,r=e.y,o=t.touches[0],i=o.clientX,c=o.clientY;i===n&&c===r||(a.moved=!0)}}function u(t){t.changedTouches.length>1||(a.moved?a.moved=!1:(t.stopPropagation(),t.preventDefault(),o.triggerPosEvent("click",a.start_pos),r.setProps(a,{status:"normal",moved:!1,start_pos:{}})))}e.watchClick=function(t){t.addEventListener("touchstart",c,!1),t.addEventListener("touchmove",s,!1),t.addEventListener("touchend",u,!1),t.addEventListener("touchcancel",u,!1),r.setProps(i,{canvas:t})},e.stopWatchClick=function(){var t=i.canvas;t.removeEventListener("touchstart",c,!1),t.removeEventListener("touchmove",s,!1),t.removeEventListener("touchend",u,!1),t.removeEventListener("touchcancel",u,!1),i=void 0,a=void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.cmd={destroy:"destroy"};var o=function(){function t(){this.destroyed=!1,this.hook_fun_list={},this.hook_other_fun_list=[],this.id=r.createRandomString()}return t.prototype.on=function(t,e,n){var r=this;if("function"==typeof e){this.hook_fun_list[t]||(this.hook_fun_list[t]=[]);var o=function(){r.off(t,e)},i={listener:e,off:o,once:n||!1};return this.hook_fun_list[t].unshift(i),{off:o}}},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.event=function(t,e){if(this.hook_fun_list[t])for(var n=this.hook_fun_list[t],r=n.length-1;r>=0;r--){var o=n[r];if(o){var i=o.listener,a=o.once;i(e),a&&o.off()}}},t.prototype.off=function(t,e){if(e){var n=this.hook_fun_list[t];if(n)for(var r=n.length-1;r>=0;r--){var o=n[r].listener;if("function"==typeof e&&o===e)return void n.splice(r,1)}}else this.hook_fun_list[t]=[]},t.prototype.offAll=function(){this.hook_fun_list={}},t.prototype.bindOtherEvent=function(t,e,n,r){if(t){var o=t.on(e,n,r),i={event:e,off:o.off,other_id:t.id};return this.hook_other_fun_list.push(i),o}},t.prototype.offOtherEvent=function(t){if(t)for(var e=this.hook_other_fun_list,n=e.length-1;n>=0;n--){var r=e[n],o=r.other_id,i=r.off;o===t.id&&(i(),e.splice(n,1))}},t.prototype.offAllOtherEvent=function(){for(var t=this.hook_other_fun_list,e=t.length-1;e>=0;e--){t[e].off(),t.splice(e,1)}this.hook_other_fun_list=[]},t.prototype.destroy=function(){this.event(e.cmd.destroy),this.offAllOtherEvent(),this.offAll(),this.destroyed=!0},t}();e.EventDispatcher=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.m3={projection:function(t,e){return[2/t,0,0,0,-2/e,0,-1,1,1]},identity:function(){return[1,0,0,0,1,0,0,0,1]},translation:function(t,e){return[1,0,0,0,1,0,t,e,1]},rotation:function(t){var e=Math.cos(t),n=Math.sin(t);return[e,-n,0,n,e,0,0,0,1]},scaling:function(t,e){return[t,0,0,0,e,0,0,0,1]},multiply:function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],c=t[5],s=t[6],u=t[7],l=t[8],f=e[0],h=e[1],p=e[2],d=e[3],v=e[4],y=e[5],g=e[6],_=e[7],m=e[8];return[f*n+h*i+p*s,f*r+h*a+p*u,f*o+h*c+p*l,d*n+v*i+y*s,d*r+v*a+y*u,d*o+v*c+y*l,g*n+_*i+m*s,g*r+_*a+m*u,g*o+_*c+m*l]},translate:function(t,n,r){return e.m3.multiply(t,e.m3.translation(n,r))},rotate:function(t,n){return e.m3.multiply(t,e.m3.rotation(n))},scale:function(t,n,r){return e.m3.multiply(t,e.m3.scaling(n,r))},toM2:function(t){var e=t[0],n=t[1],r=(t[2],t[3]),o=t[4],i=(t[5],t[6]),a=t[7];t[8];return[e,n,r,o,i,a]}}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),a=n(2);e.load=a.load;var c=n(7);e.xmlToNode=c.xmlToNode;var s=n(13);e.start=function(t,e,n){var a=n.logo,u=(n.xml,o(n,["logo","xml"])),l=i.init(t,e,u).stage;s.setLogo(a,t,e);var f=c.startScene(l);return r({},f,{destroy:i.destroy})}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,u=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&p())}function p(){if(!l){var t=c(h);l=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||c(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=void 0,a=void 0,c=function(t,e){d[o]=t,d[o+1]=e,2===(o+=2)&&(a?a(v):y())};var s="undefined"!=typeof window?window:void 0,u=s||{},l=u.MutationObserver||u.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(v,1)}}var d=new Array(1e3);function v(){for(var t=0;t<o;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}o=0}var y=void 0;function g(t,e){var n=this,r=new this.constructor(w);void 0===r[m]&&L(r);var o=n._state;if(o){var i=arguments[o-1];c(function(){return E(o,r,i,n._result)})}else A(n,r,t,e);return r}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(w);return S(e,t),e}y=f?function(){return e.nextTick(v)}:l?function(){var t=0,e=new l(v),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():h?function(){var t=new MessageChannel;return t.port1.onmessage=v,function(){return t.port2.postMessage(0)}}():void 0===s?function(){try{var t=Function("return this")().require("vertx");return void 0!==(i=t.runOnLoop||t.runOnContext)?function(){i(v)}:p()}catch(t){return p()}}():p();var m=Math.random().toString(36).substring(2);function w(){}var b=void 0,x=1,P=2,O={error:null};function T(t){try{return t.then}catch(t){return O.error=t,O}}function j(e,n,r){n.constructor===e.constructor&&r===g&&n.constructor.resolve===_?function(t,e){e._state===x?M(t,e._result):e._state===P?I(t,e._result):A(e,void 0,function(e){return S(t,e)},function(e){return I(t,e)})}(e,n):r===O?(I(e,O.error),O.error=null):void 0===r?M(e,n):t(r)?function(t,e,n){c(function(t){var r=!1,o=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?S(t,n):M(t,n))},function(e){r||(r=!0,I(t,e))},t._label);!r&&o&&(r=!0,I(t,o))},t)}(e,n,r):M(e,n)}function S(t,e){t===e?I(t,new TypeError("You cannot resolve a promise with itself")):!function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}(e)?M(t,e):j(t,e,T(e))}function k(t){t._onerror&&t._onerror(t._result),C(t)}function M(t,e){t._state===b&&(t._result=e,t._state=x,0!==t._subscribers.length&&c(C,t))}function I(t,e){t._state===b&&(t._state=P,t._result=e,c(k,t))}function A(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+x]=n,o[i+P]=r,0===i&&t._state&&c(C,t)}function C(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?E(n,r,o,i):o(i);t._subscribers.length=0}}function E(e,n,r,o){var i=t(r),a=void 0,c=void 0,s=void 0,u=void 0;if(i){if((a=function(t,e){try{return t(e)}catch(t){return O.error=t,O}}(r,o))===O?(u=!0,c=a.error,a.error=null):s=!0,n===a)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else a=o,s=!0;n._state!==b||(i&&s?S(n,a):u?I(n,c):e===x?M(n,a):e===P&&I(n,a))}var N=0;function L(t){t[m]=N++,t._state=void 0,t._result=void 0,t._subscribers=[]}var z=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(w),this.promise[m]||L(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&M(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===b&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===_){var o=T(t);if(o===g&&t._state!==b)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===R){var i=new n(w);j(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===b&&(this._remaining--,t===P?I(r,n):this._result[e]=n),0===this._remaining&&M(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;A(t,void 0,function(t){return n._settledAt(x,e,t)},function(t){return n._settledAt(P,e,t)})},t}();var R=function(){function t(e){this[m]=N++,this._result=this._state=void 0,this._subscribers=[],w!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){S(t,e)},function(e){I(t,e)})}catch(e){I(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},t}();return R.prototype.then=g,R.all=function(t){return new z(this,t).promise},R.race=function(t){var e=this;return r(t)?new e(function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},R.resolve=_,R.reject=function(t){var e=new this(w);return I(e,t),e},R._setScheduler=function(t){a=t},R._setAsap=function(t){c=t},R._asap=c,R.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=R},R.Promise=R,R})}).call(this,n(31),n(30))},function(t,e,n){"use strict";t.exports=n(32).polyfill()},function(t,e,n){n(33),t.exports=n(29)}])});